import os
from dotenv import load_dotenv
import requests
import requests_oauthlib
import json
import pandas as pd
import numpy as np

def get_tweets(user=user):
    load_dotenv()
    ACCESS_TOKEN = os.getenv("ACCESS_TOKEN")
    ACCESS_SECRET = os.getenv("ACCESS_SECRET")
    CONSUMER_KEY = os.getenv("CONSUMER_KEY")
    CONSUMER_SECRET = os.getenv("CONSUMER_SECRET")

    my_auth = requests_oauthlib.OAuth1(CONSUMER_KEY, CONSUMER_SECRET,ACCESS_TOKEN, ACCESS_SECRET)
    
    url = f'https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name={user}&count=100&tweet_mode=extended'
    response = requests.get(url, auth=my_auth, stream=True)
    print(url, response)
    return response.json()

def create_data(user_t=user_t)
    id_ = []
    retweet_count = []
    tweet = []
    time = []
    for i in range(len(user_t)):
        id_.append(user_t[i]["id_str"])
        retweet_count.append(user_t[i]["retweet_count"])
        time.append(user_t[i]['created_at'])
        try:
            tweet.append(user_t[i]['retweeted_status']['full_text'])
        except: 
            tweet.append(user_t[i]["full_text"])
    d = {"id":id_, "time":time, "tweet": tweet, "retweets":retweet_count}
    data = pd.DataFrame(data = d)
    return data